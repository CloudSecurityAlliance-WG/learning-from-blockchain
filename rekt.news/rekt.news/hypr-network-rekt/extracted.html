<section class="post-content"><p><figure><img alt="" src="https://raw.githubusercontent.com/RektHQ/Assets/main/images/2023/01/hypr-header.png"/></figure></p><p><em>What is this, a bridge hack for ants?</em></p><p><strong>Yesterday, gaming-focused L2 Hypr Network lost 2.57M HYPR (approx $220k) to a bridge exploit just two days after <a href="https://www.hypr.network/articles/hypr-mainnet-beta-launch">launch</a>.</strong></p><p>The incident was <a href="https://twitter.com/ManaMoonNFT/status/1734787141266223455">quickly identified</a> by a user, and the team <a href="https://twitter.com/hypr_network/status/1734787659527229581">warned users</a> that something was amiss, but without initially admitting to an exploit:</p><blockquote><p>ðŸ“¢ ATTENTION: Do not use the Hypr Network Bridge. The team wants to perform some more tests and do some further audits on the bridge.</p></blockquote><p>The teamâ€™s follow-up <a href="https://twitter.com/hypr_network/status/1734970973647163770">statement</a> reassured users that HYPR holders in general were not affected, with losses coming from just two addresses (<em>the only users to have bridged funds up to that point</em>).</p><p><em>However, the token did experience a <a href="https://www.coingecko.com/en/coins/hypr-network">drop of almost 40%</a> when the proceeds were dumped for 97 ETH, worth approx $220k at the time of writing, the price has since recovered with the market rebound.</em></p><p>While weâ€™ve seen <a href="https://rekt.news/heco-htx-rekt/">plenty</a> of <a href="https://rekt.news/multichain-rekt2/">bridges</a> lose <a href="https://rekt.news/poly-network-rekt2/">funds</a> to compromised keys over recent months, this is the first example of exploited code leading to a bridge hack since last autumnâ€™s <a href="https://rekt.news/bnb-bridge-rekt/">BNB bombshell</a> (<em>unless you count the <a href="https://rekt.news/shibarium-bridge-rekt/">Shibarium bridge</a>â€™s temporary self-rekt in August</em>).</p><p><strong>Forking code can be risky, especially when devs aren't up to date with issues in the original source.</strong></p><p><em>Should developers of a codebase designed to be forked take more responsibility for communications?</em></p><p><em>Or were Hypr simply not paying enough attention?</em></p><p><figure><img alt="" src="https://raw.githubusercontent.com/RektHQ/Assets/main/images/2021/09/rekt-investigates-linebreak.png"/></figure></p><p>Credit: <em><a href="https://twitter.com/BlockSecTeam/status/1735197818883588574">BlockSec</a>, <a href="https://www.hypr.network/articles/incident-postmortem-bridge-exploit">Hypr Network</a></em></p><p>The Hypr Network is built via OP Stack which allows developers to deploy fully functional L2s, forking Optimism as a template.</p><p>In the Hypr teamâ€™s post-mortem <a href="https://twitter.com/hypr_network/status/1735169665234772195">thread</a>, they explain that:</p><blockquote><p>Hypr used the most recent version of the develop branch of the OP monorepo at the time of deployment. Unbeknownst to us, this was not a production-ready branch and at the time contained a critical vulnerability which had yet to be patched.</p></blockquote><p><strong>The full post-mortem report can be found <a href="https://www.hypr.network/articles/incident-postmortem-bridge-exploit">here</a>.</strong></p><p>BlockSec <a href="https://twitter.com/BlockSecTeam/status/1735197818883588574">summarised</a> the vulnerability as follows:</p><blockquote><p>The root cause was that the attacker managed to circumvent the 'finalizeERC20Withdrawal' function check by reinitializing the contract, due to the existence of the 'clearLegacySlot' modifier.</p></blockquote><p><figure><img alt="" src="https://raw.githubusercontent.com/RektHQ/Assets/main/images/2023/01/hypr-code.png"/></figure></p><p>Exploiter address 1: <strong><a href="https://etherscan.io/address/0x5b8d598b354f5760b2a65f492154e7a3df46d1be">0x5b8d598b354f5760b2a65f492154e7a3df46d1be</a></strong></p><p>Exploiter address 2: <strong><a href="https://etherscan.io/address/0x3ea6ba6d3415e4dfd380516c799aafa94e420519">0x3ea6ba6d3415e4dfd380516c799aafa94e420519</a></strong></p><p>Attack tx: <a href="https://etherscan.io/tx/0x51ce3d9cfc85c1f6a532b908bb2debb16c7569eb8b76effe614016aac6635f65">0x51ce3d9câ€¦</a></p><p><em>The exploiter was <a href="https://etherscan.io/tx/0x21748d14991113c8fbe0b044fd8378db7a87cb24fb0a0a4096c750f3c36c8d1c">funded</a> from hacker-favourite FixedFloat and, at the time of writing, the stolen ETH remains in the <a href="https://etherscan.io/address/0x5b8d598b354f5760b2a65f492154e7a3df46d1be">0x5b8d</a> address.</em></p><p><figure><img alt="" src="https://raw.githubusercontent.com/RektHQ/Assets/main/images/2021/03/rekt-linebreak.png"/></figure></p><p><strong>Composability, interoperability and building upon open-source code are elements which allow for many of DeFiâ€™s greatest innovations.</strong></p><p><em>But they also mean that a bug in <a href="https://rekt.news/curve-vyper-rekt/">one place</a> can affect <a href="https://rekt.news/agave-hundred-rekt/">multiple protocols</a> across the sector.</em></p><p>Communication between teams and staying up-to-date with security conversations across the ecosystem is key for anyone relying on forked code. As BlockSec <a href="https://twitter.com/BlockSecTeam/status/1735197818883588574">points out</a>:</p><blockquote><p>Note that the vulnerability was <a href="https://github.com/ethereum-optimism/optimism/commit/f4a234c29b90f2a86e61fc897db343bda651202c">patched</a> by the OP team after the contract had been deployed.</p><p>This incident underscores the importance of the community working collaboratively to refine the process for releasing security patches, which will undoubtedly benefit us all.</p></blockquote><p>Hyprâ€™s post-mortem report <a href="https://www.hypr.network/articles/incident-postmortem-bridge-exploit">states</a> that, following consultation, with the OP Labs team:</p><blockquote><p>[OP Labs] agreed that improvements on their release and communications process</p></blockquote><p>And, after <a href="https://twitter.com/optimismFND/status/1735276698894041121">reassuring</a> users that other OP infrastructure was unaffected, the Optimism Foundation added:</p><blockquote><p>We encourage developers building projects in production to use releases approved by Optimism governance, which meet the security bar established by the Collective. We're also improving our release comms processes to help ensure it's clearer to projects leveraging the OP Stack.</p></blockquote><p><strong>As ever, being the first to bridge to a new ecosystem can often lead to lucrative first mover advantages.</strong></p><p>After a prolonged period of apathy, FOMO is driving a growing desire to try new things as markets begin to heat back up once again.</p><p><em>Are the potential rewards worth the risk?</em></p><p><figure><img alt="" src="https://raw.githubusercontent.com/RektHQ/Assets/main/images/2021/08/rekt-outline-conc.png"/></figure></p>