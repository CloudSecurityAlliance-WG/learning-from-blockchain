<section class="post-content"><p><figure><img alt="" src="https://raw.githubusercontent.com/RektHQ/Assets/main/images/2023/01/sturdy-header.png"/></figure></p><p><em>Not so Sturdy, after all.</em></p><p><strong><a href="https://twitter.com/SturdyFinance/">Sturdy Finance</a> has lost ~$800k to a price manipulation exploit.</strong></p><p>The Ethereum-based lending protocol offers leverage for yield farmers who deposit staked assets as collateral.</p><p>Shortly after the <a href="https://twitter.com/AnciliaInc/status/1668065601028505602">alarm was raised</a>, the Sturdy Finance team <a href="https://twitter.com/SturdyFinance/status/1668080627030315009">acknowledged</a> the attack:</p><blockquote><p>We are aware of the reported exploit of the Sturdy protocol. All markets have been paused; no additional funds are at risk and no user actions are required at this time.</p></blockquote><p><strong>As noted by <a href="https://twitter.com/AnciliaInc/status/1668081008615325698">Ancilia</a>, the attack <a href="https://chainsecurity.com/curve-lp-oracle-manipulation-post-mortem/">vector</a> is similar to exploits on <a href="https://rekt.news/midas-capital-rekt/">Midas Capital</a> and <a href="https://rekt.news/dforce-network-rekt/">dForce Network</a>.</strong></p><p><em>Is this issue really still causing problems?</em></p><p><figure><img alt="" src="https://raw.githubusercontent.com/RektHQ/Assets/main/images/2021/09/rekt-investigates-linebreak.png"/></figure></p><p>Credit: <em><a href="https://twitter.com/AnciliaInc/status/1668081008615325698">Ancilia</a>, <a href="https://twitter.com/BlockSecTeam/status/1668084629654638592">BlockSec</a></em></p><p><strong>The attack used a flash loan to target the (unfortunately named) SturdyOracle and return a manipulated price of collateral token (B-stETH-STABLE).</strong></p><p><a href="https://twitter.com/BlockSecTeam/status/1668084629654638592">BlockSec</a> provided the following step-by-step:</p><p><figure><img alt="" src="https://raw.githubusercontent.com/RektHQ/Assets/main/images/2023/01/sturdy-steps.png"/></figure></p><p>Attacker’s Address: <strong><a href="https://etherscan.io/address/0x1e8419e724d51e87f78e222d935fbbdeb631a08b">0x1e8419e724d51e87f78e222d935fbbdeb631a08b</a></strong></p><p>Attack contract (with front-running <a href="https://twitter.com/yannickcrypto/status/1668072276548370433">protection</a> built in): <a href="https://etherscan.io/address/0x0b09c86260c12294e3b967f0d523b4b2bcdfbeab">0x0b09c86260c12294e3b967f0d523b4b2bcdfbeab</a></p><p>Attack Tx: <a href="https://etherscan.io/tx/0xeb87ebc0a18aca7d2a9ffcabf61aa69c9e8d3c6efade9e2303f8857717fb9eb7">0xeb87ebc0…</a></p><p><strong>The 442 ETH ($800k) profit was immediately deposited into Tornado Cash, completing the laundering just 20 minutes after being <a href="https://etherscan.io/tx/0x2e8767269feaa14c0de59bbb29ecd1b375a511ccac57c9b01a471326f1af9bb8">funded</a> from the same source.</strong></p><p><figure><img alt="" src="https://raw.githubusercontent.com/RektHQ/Assets/main/images/2021/03/rekt-linebreak.png"/></figure></p><p><strong>This read-only reentrancy vulnerability has been seen in a number of <a href="https://twitter.com/pcaversaccio/status/1668200720913293313">attacks</a> over the last year.</strong></p><p>A February <a href="https://forum.balancer.fi/t/reentrancy-vulnerability-scope-expanded/4345">post</a> on Balancer forums noted how some Balancer pools are also susceptible to the attack vector, with the specific pools targeted in today’s attack listed as vulnerable.</p><p>With three audits (from <a href="https://skynet.certik.com/projects/sturdy">Certik</a>, <a href="https://certificate.quantstamp.com/full/sturdy.pdf">Quantstamp</a> and <a href="https://code4rena.com/reports/2022-05-sturdy">Code4rena</a>), and a well-known exploit type, it is surprising that these pools were left open to attack.</p><p><em><strong>EDIT 02/06/2024:</strong> As pointed out by <a href="https://twitter.com/Quantstamp/status/1752397356371149209">Quantstamp</a>
, the vulnerable version of the LendingPool contract did not fall within the audit scope. The leaderboard has been updated accordingly.</em></p><p>No wonder many are <a href="https://twitter.com/delitzer/status/1661755779240841222">discussing</a> the need for oracle-free lending systems, which is becoming a <a href="https://twitter.com/euler_mab/status/1667190907161182210">hot topic</a>. Though, certain solutions may eventually need <a href="https://twitter.com/euler_mab/status/1667191013671305216">oracles of their own</a>…</p><p><em>Let’s hope that, in the future, we’ll be building on Sturdy-er foundations.</em></p><p><figure><img alt="" src="https://raw.githubusercontent.com/RektHQ/Assets/main/images/2021/08/rekt-outline-conc.png"/></figure></p>