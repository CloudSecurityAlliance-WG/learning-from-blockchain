<section class="post-content"><p><figure><img alt="" src="https://raw.githubusercontent.com/RektHQ/Assets/main/images/2021/05/3value-header.png"/></figure></p><p><strong>Twice in one week.</strong></p><p>Value DeFi is a trainwreck.</p><p>Six months ago they lost $7M. Three days ago they lost $10M.</p><p><strong>Now they’ve lost another $11M.</strong></p><p><em>Brutal, savage, rekt.</em></p><p>The “co-founder” was a <a href="https://twitter.com/CryptoBethany/status/1390880003261288448?s=19">paid actress</a>, the code was copied and used incorrectly, and as a result, Value DeFi has been <em>absolutely taken down</em>.</p><p>Is this the third and final time, or will the apes continue to forgive and forget?</p><p><em>What went so wrong with Value DeFi?</em></p><p><figure><img alt="" src="https://raw.githubusercontent.com/RektHQ/Assets/main/images/2021/05/3value-investigates.png"/></figure></p><p><strong>Approximately $11 million was stolen from the vSwap AMM vSwap pools.</strong></p><p>The incident was due to the improper use of a complex exponentiation power() function behind the calculation and enforcement of the weighted constant product invariant.</p><p>Any pool which did not have its liquidity split 50/50 between assets was exploited.</p><p>Since Uniswap only supports pools with a 50/50 asset ratio, Value DeFi used the Bancor formula for their non-standard pools.</p><p><strong>Reference Transaction:</strong> <a href="https://bscscan.com/tx/0x2fd0aaf0bad8e81d28d0ee6e4f4b5cbba693d7d0d063d1662653cdd2a135c2de">0x2fd0aaf0bad8e81d28d0ee6e4f4b5cbba693d7d0d063d1662653cdd2a135c2de</a></p><p><strong>1.</strong> First of all, the attacker sends a small amount of a second token to pair addresses</p><p><strong>2.</strong> They then make a swap in which they want to withdraw a small amount of the first token and a large amount of the second token.</p><p><strong>3.</strong> Due to incorrect use of the Bancor formula, the pair contracts consider the swap to be successful. (root of exploit)</p><p><strong>Stolen funds:</strong></p><ul><li>15k BNB</li><li>2.7k FARM</li><li>1.7k BASv2</li><li>8.5M BDO</li><li>68.3k BUSD</li><li>41.4k MDG</li><li>945k VBOND</li><li>1.2M BAC</li><li>11k FIRO</li></ul><p>Credit: <a href="https://twitter.com/FrankResearcher/status/1390905494844313602?s=20">frankresearcher</a></p><p><figure><img alt="" src="https://raw.githubusercontent.com/RektHQ/Assets/main/images/2021/05/3value-code.png"/></figure></p><blockquote><p>Note the power() routine takes four arguments (baseN, baseD, expN, and expD) and is used to calculate an integer approximation of (baseN/baseD)^(expN/expD)*(2^precision) where precision is used for the calculated result. However, there is a caveat in how this power() function should be used. It makes an explicit assumption that baseN must be no less than baseD, i.e., baseN &gt;= baseD. In this attack, the pool’s swap() function is called with a crafted input that intentionally violates the above assumption. As a result, the weighted constant product enforcement is passed while the pool funds are being drained.</p></blockquote><p>Credit: <a href="https://peckshield.medium.com/valuedefi-incident-incorrect-weighted-constant-product-invariant-calculation-1bbaa220a02b">peckshield</a></p><p><figure><img alt="" src="https://raw.githubusercontent.com/RektHQ/Assets/main/images/2021/05/3value-price.png"/></figure></p><p>Despite achieving their third place on our <a href="https://www.rekt.news/leaderboard/">leaderboard</a>, the native token of Value DeFi has recovered somewhat since the latest exploit. However, <a href="https://www.nansen.ai/">Nansen</a> shows us that the DEX volume has been decreasing consistently.</p><p><figure><img alt="" src="https://raw.githubusercontent.com/RektHQ/Assets/main/images/2021/05/3value-dex.png"/></figure></p><p><figure><img alt="" src="https://raw.githubusercontent.com/RektHQ/Assets/main/images/2021/03/rekt-linebreak.png"/></figure></p><p><strong>Will another rebrand save the most hacked protocol from losing <em>all</em> their users, or is this the end for Value DeFi?</strong></p><p>The Value DeFi team were reassuring users of the safety of their platform only hours before the latest exploit, <a href="https://twitter.com/value_defi/status/1326949815557611520?s=20">tweeting</a> about increased security measures which clearly had zero impact.</p><p>Going forward, it’s hard to see how anyone could trust the anonymous developers, who admitted to using a paid actress on fiverr to play the role of their founder, and when they were confronted about it by a user, responded with <a href="https://twitter.com/CryptoDeFi137/status/1390891682917457920?s=20">something similar</a> to;</p><blockquote><p>The girl we caption as our co-founder in that video is actually just a paid actress, but one of our devs happened to go by that online alias, so then we coincidentally tracked down an actress by that same name on Fiverr to feature in our video!</p></blockquote><p><a href="https://www.rekt.news/ape-tax/">Ape tax</a> is high for users of Value DeFi, the least secure DeFi protocol. Who can have any sympathy for users of such blatant low quality projects?</p><p><strong>We’re very thankful for all the new readers that Value DeFi has brought us over the recent months, but hopefully this will be the last time.</strong></p><p>Although we ridicule the repetitive failures of the founders, these are not their funds that are being stolen. If they plan to continue their operations, then they will have to try much harder.</p><p>Instead of focusing on fake communications, focus on real users safety, not piling up worthless security audits.</p><p><strong>Or maybe it’s time to call it quits and stop putting users funds at risk.</strong></p><p><em>Can Value DeFi close their operations safely, or will we soon see a final exit scam?</em></p><p><figure><img alt="" src="https://raw.githubusercontent.com/RektHQ/Assets/main/images/2021/03/rekt-text-linebreak.png"/></figure></p>